###############################################################################
# Example: Startup/Small Business Mail Server Configuration
#
# Use case: Cost-effective mail server for startups and small businesses
# Balanced features with lower resource usage
###############################################################################

# ═══════════════════════════════════════════════════════════════
# ORGANIZATION & BRANDING
# ═══════════════════════════════════════════════════════════════

ORG_NAME="TechStart Innovations"
ORG_TAGLINE="Building the Future"

# Modern startup colors
BRAND_PRIMARY="#FF6B6B"
BRAND_SECONDARY="#4ECDC4"
BRAND_DARK="#1A1A2E"

# ═══════════════════════════════════════════════════════════════
# DOMAIN CONFIGURATION
# ═══════════════════════════════════════════════════════════════

PRIMARY_DOMAIN="techstart.io"
MAIL_DOMAIN="mail.techstart.io"
ADMIN_EMAIL="hello@techstart.io"
POSTMASTER_EMAIL="postmaster@techstart.io"

# ═══════════════════════════════════════════════════════════════
# SYSTEM CONFIGURATION
# ═══════════════════════════════════════════════════════════════

SCRIPT_VERSION="1.0.0"
LOG_FILE="/var/log/mail-server-install.log"
INSTALL_DIR="/opt/modoboa"
INSTANCE_DIR="/srv/modoboa/instance"

# ═══════════════════════════════════════════════════════════════
# DATABASE CONFIGURATION
# ═══════════════════════════════════════════════════════════════

DB_ENGINE="postgres"
DB_NAME="modoboa"
DB_USER="modoboa"
DB_HOST="localhost"
DB_PASSWORD=""  # Auto-generated

# ═══════════════════════════════════════════════════════════════
# MODOBOA ADMIN CONFIGURATION
# ═══════════════════════════════════════════════════════════════

MODOBOA_ADMIN_USER="admin"
MODOBOA_ADMIN_PASSWORD=""  # Auto-generated
MODOBOA_LANGUAGE="en"

# ═══════════════════════════════════════════════════════════════
# SSL/TLS CERTIFICATE CONFIGURATION
# ═══════════════════════════════════════════════════════════════

CERT_GENERATE="true"
CERT_TYPE="letsencrypt"
CERT_EMAIL="hello@techstart.io"

# ═══════════════════════════════════════════════════════════════
# MAIL SERVICE CONFIGURATION - OPTIMIZED FOR LOWER RESOURCES
# ═══════════════════════════════════════════════════════════════

DOVECOT_ENABLED="true"
POSTFIX_ENABLED="true"
OPENDKIM_ENABLED="true"
AMAVIS_ENABLED="true"
AMAVIS_USER="amavis"
SPAMASSASSIN_ENABLED="true"
CLAMAV_ENABLED="false"  # Disabled to save resources (2GB server)
RADICALE_ENABLED="false"
NGINX_ENABLED="true"

# ═══════════════════════════════════════════════════════════════
# PORT CONFIGURATION
# ═══════════════════════════════════════════════════════════════

PORT_SSH="22"
PORT_HTTP="80"
PORT_HTTPS="443"
PORT_SMTP="25"
PORT_SUBMISSION="587"
PORT_SMTPS="465"
PORT_IMAPS="993"
PORT_POP3S="995"

# ═══════════════════════════════════════════════════════════════
# BACKUP CONFIGURATION - STANDARD RETENTION
# ═══════════════════════════════════════════════════════════════

BACKUP_DIR="/var/backups/mail-server"
BACKUP_RETENTION_DAYS="7"  # Weekly retention for cost savings
BACKUP_CRON_SCHEDULE="0 3 * * *"  # Daily at 3 AM
BACKUP_SCRIPT="/usr/local/bin/mail-server-backup.sh"
BACKUP_LOG="/var/log/mail-server-backup.log"

# ═══════════════════════════════════════════════════════════════
# FAIL2BAN CONFIGURATION - MODERATE SETTINGS
# ═══════════════════════════════════════════════════════════════

FAIL2BAN_MAXRETRY="5"
FAIL2BAN_BANTIME="3600"  # 1 hour

# ═══════════════════════════════════════════════════════════════
# SYSTEM REQUIREMENTS
# ═══════════════════════════════════════════════════════════════

MIN_MEMORY_MB="1800"
MIN_DISK_GB="10"

# ═══════════════════════════════════════════════════════════════
# LOG ROTATION CONFIGURATION
# ═══════════════════════════════════════════════════════════════

LOGROTATE_FREQUENCY="weekly"
LOGROTATE_COUNT="8"  # Keep 8 weeks of logs

# ═══════════════════════════════════════════════════════════════
# CONNECTIVITY
# ═══════════════════════════════════════════════════════════════

CONNECTIVITY_TEST_HOST="google.com"
IP_DETECTION_SERVICE="ifconfig.me"

# ═══════════════════════════════════════════════════════════════
# DNS CONFIGURATION
# ═══════════════════════════════════════════════════════════════

SKIP_DNS_PROMPT="false"
MX_PRIORITY="10"
SPF_RECORD="v=spf1 mx ~all"
DMARC_POLICY="quarantine"
