###############################################################################
# Example: Development/Testing Mail Server Configuration
#
# Use case: Development and testing environment
# Self-signed certs, relaxed security, shorter retention
###############################################################################

# ═══════════════════════════════════════════════════════════════
# ORGANIZATION & BRANDING
# ═══════════════════════════════════════════════════════════════

ORG_NAME="DevMail Testing"
ORG_TAGLINE="Development Mail Environment"

# Dev environment colors
BRAND_PRIMARY="#FF9800"
BRAND_SECONDARY="#FFC107"
BRAND_DARK="#F57C00"

# ═══════════════════════════════════════════════════════════════
# DOMAIN CONFIGURATION
# ═══════════════════════════════════════════════════════════════

PRIMARY_DOMAIN="dev-mail.local"
MAIL_DOMAIN="mail.dev-mail.local"
ADMIN_EMAIL="dev@dev-mail.local"
POSTMASTER_EMAIL="postmaster@dev-mail.local"

# ═══════════════════════════════════════════════════════════════
# SYSTEM CONFIGURATION
# ═══════════════════════════════════════════════════════════════

SCRIPT_VERSION="1.0.0"
LOG_FILE="/var/log/dev-mail-install.log"
INSTALL_DIR="/opt/modoboa"
INSTANCE_DIR="/srv/modoboa/instance"

# ═══════════════════════════════════════════════════════════════
# DATABASE CONFIGURATION
# ═══════════════════════════════════════════════════════════════

DB_ENGINE="postgres"
DB_NAME="modoboa_dev"
DB_USER="modoboa_dev"
DB_HOST="localhost"
DB_PASSWORD="devpass123"  # Fixed password for dev environment

# ═══════════════════════════════════════════════════════════════
# MODOBOA ADMIN CONFIGURATION
# ═══════════════════════════════════════════════════════════════

MODOBOA_ADMIN_USER="admin"
MODOBOA_ADMIN_PASSWORD="admin123"  # Fixed password for dev
MODOBOA_LANGUAGE="en"

# ═══════════════════════════════════════════════════════════════
# SSL/TLS CERTIFICATE CONFIGURATION - SELF-SIGNED FOR DEV
# ═══════════════════════════════════════════════════════════════

CERT_GENERATE="true"
CERT_TYPE="selfsigned"  # Self-signed certificate for dev
CERT_EMAIL="dev@dev-mail.local"

# ═══════════════════════════════════════════════════════════════
# MAIL SERVICE CONFIGURATION - MINIMAL FOR DEV
# ═══════════════════════════════════════════════════════════════

DOVECOT_ENABLED="true"
POSTFIX_ENABLED="true"
OPENDKIM_ENABLED="false"  # Skip DKIM in dev
AMAVIS_ENABLED="false"  # Skip content filtering
AMAVIS_USER="amavis"
SPAMASSASSIN_ENABLED="false"  # Skip spam filtering
CLAMAV_ENABLED="false"  # Skip antivirus
RADICALE_ENABLED="false"
NGINX_ENABLED="true"

# ═══════════════════════════════════════════════════════════════
# PORT CONFIGURATION
# ═══════════════════════════════════════════════════════════════

PORT_SSH="22"
PORT_HTTP="80"
PORT_HTTPS="443"
PORT_SMTP="25"
PORT_SUBMISSION="587"
PORT_SMTPS="465"
PORT_IMAPS="993"
PORT_POP3S="995"

# ═══════════════════════════════════════════════════════════════
# BACKUP CONFIGURATION - SHORT RETENTION
# ═══════════════════════════════════════════════════════════════

BACKUP_DIR="/var/backups/dev-mail"
BACKUP_RETENTION_DAYS="3"  # Only keep 3 days in dev
BACKUP_CRON_SCHEDULE="0 4 * * *"  # Daily at 4 AM
BACKUP_SCRIPT="/usr/local/bin/dev-mail-backup.sh"
BACKUP_LOG="/var/log/dev-mail-backup.log"

# ═══════════════════════════════════════════════════════════════
# FAIL2BAN CONFIGURATION - RELAXED FOR DEV
# ═══════════════════════════════════════════════════════════════

FAIL2BAN_MAXRETRY="10"  # More attempts allowed
FAIL2BAN_BANTIME="600"  # Only 10 minutes

# ═══════════════════════════════════════════════════════════════
# SYSTEM REQUIREMENTS - MINIMAL
# ═══════════════════════════════════════════════════════════════

MIN_MEMORY_MB="1500"
MIN_DISK_GB="8"

# ═══════════════════════════════════════════════════════════════
# LOG ROTATION CONFIGURATION
# ═══════════════════════════════════════════════════════════════

LOGROTATE_FREQUENCY="daily"
LOGROTATE_COUNT="3"  # Only 3 days of logs

# ═══════════════════════════════════════════════════════════════
# CONNECTIVITY
# ═══════════════════════════════════════════════════════════════

CONNECTIVITY_TEST_HOST="google.com"
IP_DETECTION_SERVICE="ifconfig.me"

# ═══════════════════════════════════════════════════════════════
# DNS CONFIGURATION - SKIP PROMPTS FOR DEV
# ═══════════════════════════════════════════════════════════════

SKIP_DNS_PROMPT="true"  # Skip DNS check in dev
MX_PRIORITY="10"
SPF_RECORD="v=spf1 mx ~all"
DMARC_POLICY="none"  # No DMARC enforcement in dev
